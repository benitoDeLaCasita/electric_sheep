# -*- mode: ruby -*-
# vi: set ft=ruby :

host "acceptance-container", hostname: "10.0.3.10",
  description: "ElectricSheeps - Container for acceptance testing" # optional

project "scp-move-local-to-remote" do
  resource :file, path: "dummy.file"
  move to: "acceptance-container", using: :scp, as: "vagrant"
end

project "mongodb-dump", description: "MongoDB database backup" do

  resource :database, name: "controldb"
  remotely on: "acceptance-container", as: "vagrant" do
    mongodb_dump
    tar_gz
  end

end

project "mysql-dump", description: "MySQL database backup" do

  resource :database, name: "controldb"
  remotely on: "acceptance-container", as: "vagrant" do
    mysql_dump user: "operator", password: "pseudorandom"
    tar_gz
  end

end
